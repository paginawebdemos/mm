let _0xe7a6c6=_0x4f6e;!function($,x){let e=_0x4f6e,a=$();for(;;)try{let _=-parseInt(e(320))/1+parseInt(e(324))/2*(-parseInt(e(291))/3)+-parseInt(e(275))/4+parseInt(e(293))/5*(parseInt(e(267))/6)+parseInt(e(273))/7+parseInt(e(268))/8+parseInt(e(308))/9;if(654383===_)break;a.push(a.shift())}catch(t){a.push(a.shift())}}(_0x40c3,654383);import{initializeApp as $}from"https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";import{getAuth as x,signInWithEmailAndPassword as e,onAuthStateChanged as a,signOut as _}from"https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";import{getFirestore as t,collection as i,getDocs as n,addDoc as r,deleteDoc as o,doc as c}from"https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";function _0x4f6e($,x){let e=_0x40c3();return(_0x4f6e=function($,x){return e[$-=264]})($,x)}let firebaseConfig={apiKey:_0xe7a6c6(314),authDomain:_0xe7a6c6(313),projectId:_0xe7a6c6(283),storageBucket:_0xe7a6c6(327),messagingSenderId:_0xe7a6c6(270),appId:_0xe7a6c6(304)},app=$(firebaseConfig),auth=x(app),db=t(app),loginSection=document[_0xe7a6c6(272)]("login-section"),adminSection=document[_0xe7a6c6(272)]("admin-content"),errorMessage=document.getElementById(_0xe7a6c6(300)),logoutBtn=document[_0xe7a6c6(272)]("logout-btn"),addDishForm=document[_0xe7a6c6(272)](_0xe7a6c6(281)),menuList=document[_0xe7a6c6(272)](_0xe7a6c6(325)),dishPriceInput=document.getElementById("dish-price");async function loadMenu(){let $=_0xe7a6c6,x=await n(i(db,$(289)));menuList.innerHTML="",x.forEach(x=>{let e=$,a=x[e(328)](),_=document[e(310)](e(278));_[e(286)][e(295)]("dish-card"),_.innerHTML=e(299)+a[e(302)]+'" alt="'+a[e(305)]+'" width="100">\n            <h5>'+a[e(305)]+e(322)+a[e(266)]+"</p>\n            <p><strong>Categor\xeda:</strong> "+a[e(318)]+e(284)+a[e(294)]+"</p>\n            <button onclick=\"deleteDish('"+x.id+"')\">Eliminar</button>\n        ",menuList[e(271)](_)})}async function addDish($,x,e,a,_){await r(i(db,"menu"),{name:$,category:x,price:"$"+e,img:a,description:_}),loadMenu()}async function uploadToCloudinary($){let x=_0xe7a6c6,e=x(292),a=new FormData;a[x(290)]("file",$),a[x(290)]("upload_preset","ml_default");try{let _=await fetch(e,{method:x(301),body:a}),t=await _[x(264)]();return t.secure_url}catch(i){throw console[x(287)](x(280),i),i}}function _0x40c3(){let $=["reset","createElement","Error al cerrar sesi\xf3n:","value","luna-5a497.firebaseapp.com","AIzaSyBIe6_4rj47XgSWHFVGpk04qB7JgOJIhrI","Por favor, selecciona una imagen para el producto.","dish-category","catch","category","none","1189096OZieVo","dish-description","</h5>\n            <p><strong>Precio:</strong> ","password","1422324ILOxJn","menu-list","submit","luna-5a497.firebasestorage.app","data","json","then","price","3547158pKlEuY","5722640RtPOym","style","915765095360","appendChild","getElementById","7342727QxRDzB","email","2702612PiiyyT","trim","display","div","files","Error al subir la imagen:","add-dish-form","preventDefault","luna-5a497","</p>\n            <p><strong>Descripci\xf3n:</strong> ","addEventListener","classList","error","dish-img-upload","menu","append","3whApDp","https://api.cloudinary.com/v1_1/dmlex134e/image/upload","10jhDeMa","description","add","click","Producto agregado correctamente.","Error al agregar el producto. Int\xe9ntalo nuevamente.",'\n            <img src="',"error-message","POST","img","block","1:915765095360:web:689905fc5455bdbb76f625","name","replace","dish-name","2552553CtUoAX"];return(_0x40c3=function(){return $})()}document[_0xe7a6c6(272)]("login-form")[_0xe7a6c6(285)](_0xe7a6c6(326),$=>{let x=_0xe7a6c6;$[x(282)]();let a=document[x(272)](x(274))[x(312)],_=document[x(272)](x(323))[x(312)];e(auth,a,_)[x(265)]($=>{let e=x;loginSection[e(269)].display=e(319),adminSection.style[e(277)]=e(303),loadMenu()})[x(317)]($=>{let e=x;errorMessage[e(269)][e(277)]=e(303)})}),a(auth,$=>{let x=_0xe7a6c6;$?(loginSection[x(269)][x(277)]=x(319),adminSection.style[x(277)]=x(303),loadMenu()):(loginSection[x(269)].display=x(303),adminSection[x(269)][x(277)]=x(319))}),window.deleteDish=async function($){await o(c(db,"menu",$)),loadMenu()},addDishForm[_0xe7a6c6(285)](_0xe7a6c6(326),async $=>{let x=_0xe7a6c6;$.preventDefault();let e=document.getElementById(x(307))[x(312)],a=document[x(272)](x(316))[x(312)],_=dishPriceInput.value[x(306)]("$","")[x(276)](),t=document[x(272)](x(288)),i=document[x(272)](x(321))[x(312)],n=t[x(279)][0];if(!n){alert(x(315));return}try{let r=await uploadToCloudinary(n);await addDish(e,a,_,r,i),addDishForm[x(309)](),alert(x(297))}catch(o){alert(x(298))}}),logoutBtn.addEventListener(_0xe7a6c6(296),()=>{let $=_0xe7a6c6;_(auth)[$(265)](()=>{let x=$;document[x(272)](x(274))[x(312)]="",document.getElementById(x(323))[x(312)]="",loginSection[x(269)][x(277)]="block",adminSection[x(269)][x(277)]=x(319)})[$(317)](x=>{let e=$;console[e(287)](e(311),x)})});